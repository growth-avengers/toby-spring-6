# Section 3: 테스트

## 강의 내용 정리

<hr/>

### 테스트의 목적
- 스프링이 쉽게 짤 수 있도록 도와줄 것이다.
- 테스트 작성과 실행도 개발 과정의 일부이다.
- 눈이 아니라 코드로 검증하자
  - 로그
  - 웹 UI
  => 테스트 대상이 많아질수록 검증에 많은 시간 소요

<br />

### 테스트의 방향성
- 가능한 작은 크기
- 자동 수행되는 테스트
- 우연히 성공할 수도 있으니 다양한 케이스로 테스트해보라

<br />

### Junit
- 알아야할 사항들
  - @Test 테스트 메서드
  - @BeforeEach 테스트
    - 각 테스트 전에 실행된다.
  - 테스트마다 새로운 인스턴스가 만들어진다.

<br />

### 테스트 과정
- 테스트에서 무엇을 검증할 것인가 결정
- 처음에는 일단 하드코딩 혹은 그냥 되는데까지만 해봐야한다.
- 외부에서 영향을 미칠 수 있는 협력자들이 무엇이 있는지 파악

<br />

### 테스트의 구성요소
- 테스트 대상(SUT. system under test)
- 테스트용 오브젝트(Stub) => Mock과 비슷
  - 테스트하는 과정에서 Collaborator들이 테스트에 영향을 미칠 수 있다면
  - 테스트코드에서는 값이 API, DB에서 가져온 것인지, 아니면 그냥 하드코딩인지 관심이 없다.
  => 테스트 대역: 속이는 것이다. (ImPoster. Test Double(대역))

<br />

### 수동 DI 테스트 vs 자동 테스트

#### 수동 DI 테스트
- 테스트용 협력자 / 의존 오브젝트를 테스트 대상에 직접 주입하고 테스트
  - 직접 내가 의존관계에 있는 오브젝트들을 수동으로 넣어주는 것


#### 컨테이너 테스트
- 테스트용 협력자 / 의존 오브젝트를 스프링의 구성정보를 이용해서 지정하고 컨테이너로부터 테스트 대상을 가져와서 테스트
  - @ContextConfiguration
  - @Autowired
  - @ExtendWith
  
<br />

### 학습 테스트
- 직접 만들지 않은 코드, 라이브러리, 레거시 시스템에 대한 테스트(이용을 해야하지만 통제할 수 없는)
- 테스트 대상의 사용방법을 익히고 동작방식을 확인하는데 유용하다.
- 외부 기술, 서비스가 버전이 올라갔을 때 이전과 동일하게 동작하는지 확인할 수도 있다.

<br />

### 도메인 오브젝트 테스트
- 도메인을 어디에 둘 것인가? Service vs Domain
- 오브젝트 도메인 테스트를 작성하면 이걸 사용해서 서비스 코딩이 굉장한 확신을 갖고 빠르게 진행 가능



<br />

<hr/>

## 느낀점
- 테스트를 고려하여 로직들을 잘 분리하고 분배하는 설계를 하자. 
- 원활한 테스트를 위해 의존관계 주입을 잘 활용하자.
- 팀에서 새로운 기술을 도입할 때, 학습테스트를 가지고 이렇게 사용하면 되요~ 라고 하면 좋다.
- 다른 테스트를 못하더라도 도메인 오브젝트만이라도 하자!